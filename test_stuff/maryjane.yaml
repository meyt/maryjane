
PY:
  - from os.path import split, exists, basename
  - from os import mkdir

title: Test Project
version: 0.1.0

empty:

static: {here}/static
sass: {here}/sass
temp: {here}/../temp

bag:
  count: 0
  avg: .34
  INCLUDE: {here}/simple.dict.yaml

title: $$
  A simple multi-line
  text.A simple multi-line
  text. $$

text_files:

  file1: {static}/file1.txt
  files:
    - {static}/file1.txt
    - {static}/file2.txt

  outfile: {temp}/out.txt
  outdir: {dirname(outfile)}

  ECHO: Concatenating {basename(file1)}, {', '.join(basename(f) for f in files)} -> {basename(outfile)}.
  PY:
    - $$
      if not exists(outdir):
        mkdir(outdir)
      $$

    - $$
      for i in range(5):
        bag.count += i
      $$

  SHELL:
    - touch {outfile}
    - cat {file1} {' '.join(files)} >> {outfile}
  PY: bag.count += 1

  ECHO: Watching for {static}
  WATCH: {static}

styles:
  ECHO: Compiling index.sass > index.css
  SASS: {sass}/index.sass > {temp}/index.css

  ECHO: Watching for {sass}
  WATCH: {sass}


ECHO: Watching for {here}
WATCH: {here}/maryjane.yaml
NO_WATCH: {here}/temp
