
PY:
  - from os.path import split, exists, basename
  - from os import mkdir

title: Test Project
version: 0.1.0

empty:

static: {here}/static
sass: {here}/sass
temp: {here}/../temp

bag:
  count: 0
  avg: .34
  INCLUDE: {here}/simple.dict.yaml

task1:

  file1: {static}/file1.txt
  files:
    - {static}/file1.txt
    - {static}/file2.txt

  outfile: {temp}/out.txt
  outdir: {dirname(outfile)}

  ECHO: Concatenating {basename(file1)}, {', '.join(basename(f) for f in files)} -> {basename(outfile)}.
  PY: if not exists(outdir): mkdir(outdir)
  SHELL:
    - touch {outfile}
    - cat {file1} {' '.join(files)} >> {outfile}
  PY: bag.count += 1


ECHO: Compiling index.sass > index.css
SASS: {sass}/index.sass > {temp}/index.css

WATCH:
  - {here}
  - {sass}
WATCH_ALL: {static}
NO_WATCH: {here}/temp
