
context: !options
  working_dir: !eval manifest_dir
  S: !template ${manifest_dir}/stuff

task1: !watch
  banner: !template |
    Executing task1
    source files:
    ${'\n'.join(task1.inputs)}

  actions:
    - !subprocess
      shell: true
      arguments: !template cat ${' '.join(task1.inputs)} > ${task1.output}
  watch: !eval task1.inputs
  inputs:
    - !template ${S}/a.txt
    - !template ${S}/b.txt
  output: !template ${S}/a-b.txt

task2: !watch
  banner: !template |
    Executing task2:
    Compressing
    ${task1.output}
    Into
    ${task2.output}
  actions:
    - !subprocess
      shell: true
      arguments: !template tar --absolute-names -cf ${task2.output} ${task1.output}
  output: !template ${S}/a-b.tar.gz
  watch:
    - !eval task1.output



